!function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return"object"===("undefined"==typeof exports?"undefined":n(exports))?module.exports=e():"function"==typeof define&&define.amd?define(function(){return e()}):t.datepicker=e()}(this,function(){"use strict";function t(t,o){var i="string"==typeof t?document.querySelector(t):t,a=i.parentElement;o=e(o||n(),i,t);var s=document.createElement("div"),d=o,u=d.startDate,h=d.dateSelected,f=i===document.body||i===document.querySelector("html"),w={el:i,parent:a,nonInput:"INPUT"!==i.nodeName,noPosition:f,position:!f&&o.position,startDate:u,dateSelected:h,minDate:o.minDate,maxDate:o.maxDate,noWeekends:!!o.noWeekends,calendar:s,currentMonth:(u||h).getMonth(),currentMonthName:(o.months||y)[(u||h).getMonth()],currentYear:(u||h).getFullYear(),setDate:l,remove:p,onSelect:o.onSelect,onShow:o.onShow,onHide:o.onHide,onMonthChange:o.onMonthChange,formatter:o.formatter,months:o.months,days:o.days,disableMobile:o.disableMobile,isMobile:"ontouchstart"in window};return h&&c(i,w),s.classList.add("datepicker"),s.classList.add("hidden"),g.push(i),r(u||h,w),m(s,w),window.addEventListener("click",v.bind(w)),window.addEventListener("focusin",v.bind(w)),window.addEventListener("keyup",v.bind(w)),"static"===getComputedStyle(a).position&&(a.style.position="relative"),a.appendChild(s),w}function e(t,e){if(!e)throw new Error("An invalid selector or non-DOM node has been provided.");if(g.includes(e))throw new Error("A datepicker already exists on that element.");var n=t.position,r=t.maxDate,i=t.minDate,a=t.dateSelected,s=t.formatter,c=t.customMonths,d=t.customDays;if(n){var u=["tr","tl","br","bl"].some(function(t){return n===t}),l='"options.position" needs to be one of the following: tl, tr, bl, or br.';if(!u)throw new Error(l);t.position=o(n)}else t.position=o("bl");if(["startDate","dateSelected","minDate","maxDate"].forEach(function(e){if(t[e]){if(!h(t[e])||isNaN(+t[e]))throw new TypeError('"options.'+e+'" needs to be a valid JavaScript Date object.');t[e]=f(t[e])}}),t.startDate=t.startDate||t.dateSelected||f(new Date),t.formatter="function"==typeof s?s:null,r<i)throw new Error('"maxDate" in options is less than "minDate".');if(a){if(i>a)throw new Error('"dateSelected" in options is less than "minDate".');if(r<a)throw new Error('"dateSelected" in options is greater than "maxDate".')}return["onSelect","onShow","onHide","onMonthChange"].forEach(function(e){t[e]="function"==typeof t[e]&&t[e]}),[c,d].forEach(function(e,n){if(void 0!==e){var o=['"customMonths" must be an array with 12 strings.','"customDays" must be an array with 7 strings.'],r=["[object Array]"!=={}.toString.call(e),e.length!==(n?7:12),e.some(function(t){return"string"!=typeof t})].some(function(t){return t});if(r)throw new Error(o[n]);t[n?"days":"months"]=e}}),t}function n(){return{startDate:f(new Date),position:"bl"}}function o(t){var e={};return e[b[t[0]]]=1,e[b[t[1]]]=1,e}function r(t,e){var n=i(t,e),o=a(t,e);e.calendar.innerHTML=n+o}function i(t,e){return['<div class="controls">','<div class="arrow left"></div>','<div class="month-year">','<span class="month">'+(e.months||y)[t.getMonth()]+"</span>",'<span class="year">'+t.getFullYear()+"</span>","</div>",'<div class="arrow right"></div>',"</div>"].join("")}function a(t,e){var n=e.minDate,o=e.maxDate,r=e.dateSelected,i=e.currentYear,a=e.currentMonth,s=e.noWeekends,c=new Date,d=c.toJSON().slice(0,7)===t.toJSON().slice(0,7),u=new Date(new Date(t).setDate(1)),l=u.getDay();u.setMonth(u.getMonth()+1),u.setDate(0);var h=u.getDate(),f=[],p=7*((l+h)/7|0);p+=(l+h)%7?7:0;for(var m=1;m<=p;m++){var v=(e.days||w)[(m-1)%7],y=m-l,b="",g='<span class="num">'+y+"</span>",S=new Date(i,a,y),D=y<1||y>h;if(D)b="empty",g="";else{var M=n&&S<n||o&&S>o,E="Sat"===v||"Sun"===v,x=d&&!M&&y===c.getDate();M=M||s&&E,b=M?"disabled":x?"current":""}+S!==+r||D||(b+=" active"),f.push('<div class="square num '+v+" "+b+'">'+g+"</div>")}var L=(e.days||w).map(function(t){return'<div class="square day">'+t+"</div>"}).concat(f);if(L.length%7!==0){var N="Calendar not constructed properly. The # of squares should be a multiple of 7.";throw new Error(N)}return L.unshift('<div class="squares">'),L.push("</div>"),L.join("")}function s(t,e){var n=e.currentMonth,o=e.currentYear,r=e.calendar,i=e.el,a=e.onSelect,s=r.querySelector(".active"),d=t.textContent;e.dateSelected=new Date(o,n,d),s&&s.classList.remove("active"),t.classList.add("active"),c(i,e),r.classList.add("hidden"),a&&e.onSelect(e)}function c(t,e){if(!e.nonInput)return e.formatter?e.formatter(t,e.dateSelected):void(t.value=e.dateSelected.toDateString())}function d(t,e){e.currentMonth+=t.contains("right")?1:-1,12===e.currentMonth?(e.currentMonth=0,e.currentYear++):e.currentMonth===-1&&(e.currentMonth=11,e.currentYear--);var n=new Date(e.currentYear,e.currentMonth,1);r(n,e),e.currentMonthName=(e.months||y)[e.currentMonth],e.onMonthChange&&e.onMonthChange(e)}function u(t){if(!t.noPosition){var e=t.el,n=t.calendar,o=t.position,r=t.parent,i=o.top,a=o.right,s=r.getBoundingClientRect(),c=e.getBoundingClientRect(),d=n.getBoundingClientRect(),u=c.top-s.top+r.scrollTop,l="\n      top:"+(u-(i?d.height:c.height*-1))+"px;\n      left:"+(c.left-s.left+(a?c.width-d.width:0))+"px;\n    ";n.setAttribute("style",l)}}function l(t){if(!h(t))throw new TypeError("`setDate` needs a JavaScript Date object.");t=f(t),this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth(),this.currentMonthName=(instance.months||y)[t.getMonth()],this.dateSelected=t,c(this.el,this),r(t,this)}function h(t){return"[object Date]"==={}.toString.call(t)}function f(t){return new Date(t.toDateString())}function p(){window.removeEventListener("click",v),window.removeEventListener("focusin",v),window.removeEventListener("keyup",v),this.calendar.remove(),this.observer.disconnect(),this.calendar.hasOwnProperty("parentStyle")&&(this.parent.style.position="");var t=g.indexOf(this.el);t>-1&&g.splice(t,1)}function m(t,e){e.observer=new MutationObserver(function(t,n){t[0].oldValue.includes("hidden")?(u(e),e.onShow&&e.onShow(e)):e.onHide&&e.onHide(e)}),e.observer.observe(t,{attributes:1,attributeFilter:["class"],attributeOldValue:1})}function v(t){function e(t,e){var n=t.target.classList;n.contains("num")?!function(){var n="SPAN"===t.target.nodeName?t.target.parentNode:t.target,o=["disabled","active","empty"].some(function(t){return n.classList.contains(t)});!o&&s(n,e)}():n.contains("arrow")&&d(n,e)}if(!t.path){var n=t.target;for(t.path=[];n!==document;)t.path.push(n),n=n.parentNode}if(!this.isMobile||!this.disableMobile){var o=this.calendar.classList,r=o.contains("hidden");if("keyup"!==t.type||9===t.keyCode)return"focusin"===t.type?t.target===this.el&&o.remove("hidden"):void(this.noPosition?t.path.includes(this.calendar)?e(t,this):o.toggle("hidden"):r?t.target===this.el&&o.remove("hidden"):t.path.includes(this.calendar)?e(t,this):t.target!==this.el&&o.add("hidden"))}}var y=["January","February","March","April","May","June","July","August","September","October","November","December"],w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],b={t:"top",r:"right",b:"bottom",l:"left"},g=[];return t});