!function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return"object"===("undefined"==typeof exports?"undefined":n(exports))?module.exports=t():"function"==typeof define&&define.amd?define(function(){return t()}):e.Datepicker=t()}(this,function(){"use strict";function e(e,r){var i=document.querySelector(e);r=t(r||n(),i,e);var a=document.createElement("div"),s=r.startDate||new Date,d="body"===e||"html"===e,u={el:i,nonInput:"INPUT"!==i.nodeName,noPosition:d,position:!d&&r.position,startDate:s,dateSelected:r.dateSelected,minDate:r.minDate,maxDate:r.maxDate,calendar:a,currentMonth:s.getMonth(),currentYear:s.getFullYear(),remove:h};return u.dateSelected&&c(i,u),a.classList.add("datepicker"),a.classList.add("hidden"),g.push(i),o(s,u),window.addEventListener("resize",p.bind(u)),window.addEventListener("click",f.bind(u)),i.addEventListener(u.nonInput?"click":"focus",m.bind(u)),document.body.appendChild(a),u}function t(e,t,n){if(!t)throw new Error('"'+n+"\" doesn't reference any element on the page.");if(g.includes(t))throw new Error("A datepicker already exists on that element.");var o=e.position,i=e.maxDate,a=e.minDate,s=e.dateSelected;if(o){var c=["tr","tl","br","bl"].some(function(e){return o===e}),d='"options.position" needs to be one of the following: tl, tr, bl, or br.';if(!c)throw new Error(d);e.position=r(o)}else e.position=r("bl");if(["startDate","dateSelected","minDate","maxDate"].forEach(function(t){if(e[t]){var n={}.toString.call(e[t]).slice(8,-1);if("Date"!==n)throw new TypeError('"options.'+t+'" needs to be a JavaScript Date object.');e[t]=new Date(e[t].toLocaleDateString())}}),i<a)throw new Error('"maxDate" in options is less than "minDate".');if(s){if(a>s)throw new Error('"dateSelected" in options is less than "minDate".');if(i<s)throw new Error('"dateSelected" in options is greater than "maxDate".')}return e}function n(){return{startDate:new Date((new Date).toLocaleDateString()),position:"bl"}}function r(e){var t={};return t[D[e[0]]]=1,t[D[e[1]]]=1,t}function o(e,t){var n=i(e,t),r=a(e,t);t.calendar.innerHTML=n+r}function i(e){return['<div class="controls">','<div class="arrow left"></div>','<div class="month-year">','<span class="month">'+v[e.getMonth()]+"</span>",'<span class="year">'+e.getFullYear()+"</span>","</div>",'<div class="arrow right"></div>',"</div>"].join("")}function a(e,t){var n=t.minDate,r=t.maxDate,o=t.dateSelected,i=t.currentYear,a=t.currentMonth,s=new Date,c=s.toJSON().slice(0,7)===e.toJSON().slice(0,7),d=new Date(new Date(e).setDate(1)),u=d.getDay();d.setMonth(d.getMonth()+1),d.setDate(0);var l=d.getDate(),h=[],p=7*((u+l)/7|0);p+=(u+l)%7?7:0;for(var f=1;f<=p;f++){var m=w[f%7],v=f-u,D="",g='<span class="num">'+v+"</span>",y=new Date(i,a,v);if(v<1||v>l)D="empty",g="";else{var b=n&&y<n||r&&y>r,S=c&&!b&&v===s.getDate();D=b?"disabled":S?"current":""}+y===+o&&c&&(D+=" active"),h.push('<div class="square num '+m+" "+D+'">'+g+"</div>")}var M=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(function(e){return'<div class="square day">'+e+"</div>"}).concat(h);if(M.length%7!==0){var E="Calendar not constructed properly. The # of squares should be a multiple of 7.";throw new Error(E)}return M.unshift('<div class="squares">'),M.push("</div>"),M.join("")}function s(e,t){var n=t.currentMonth,r=t.currentYear,o=t.calendar,i=t.el,a=o.querySelector(".active"),s=e.textContent;t.dateSelected=new Date(r,n,s),a&&a.classList.remove("active"),e.classList.add("active"),c(i,t,s)}function c(e,t,n){var r=t.currentMonth,o=t.currentYear,i=t.dateSelected;e.setAttribute("year",o),e.setAttribute("month",r),e.setAttribute("day",n||i.getDate()),t.nonInput||(e.value=t.dateSelected.toDateString())}function d(e,t){t.currentMonth+=e.contains("right")?1:-1,12===t.currentMonth?(t.currentMonth=0,t.currentYear++):t.currentMonth===-1&&(t.currentMonth=11,t.currentYear--);var n=new Date(t.currentYear,t.currentMonth,1);o(n,t)}function u(e){if(!e.noPosition){var t=e.el,n=e.calendar,r=e.position,o=r.top,i=r.bottom,a=r.left,s=r.right,c=t.getBoundingClientRect(),d=n.getBoundingClientRect(),u=c.left/window.innerWidth*100,l="";o&&(l+="top:"+(window.scrollY+c.top-d.height)+"px;"),i&&(l+="top:"+(window.scrollY+c.top+c.height)+"px;"),a&&(l+="left:"+u+"%;"),s&&(l+="right:"+u+"%;"),n.setAttribute("style",l)}}function l(e){if(!e.path){var t=e.target;for(e.path=[];t!==document;)e.path.push(t),t=t.parentNode}return e}function h(){window.removeEventListener("resize",p),window.removeEventListener("click",f),this.el.removeEventListener(instance.nonInput?"click":"focus",m),this.calendar.remove();var e=g.indexOf(this.el);e>-1&&g.splice(e,1)}function p(){this.calendar.classList.contains("hidden")||u(this)}function f(e){if(e=l(e),!e.path.includes(this.calendar)&&!e.path.includes(this.el)&&!this.noPosition)return this.calendar.classList.add("hidden");var t="SPAN"===e.target.nodeName?e.target.parentNode:e.target,n=t.classList,r=["active","empty","disabled"].some(function(e){return n.contains(e)});r||(n.contains("num")?(s(t,this),this.calendar.classList.add("hidden")):n.contains("arrow")&&d(n,this))}function m(e){e=l(e);var t=this.calendar.classList,n=t.contains("hidden");if("focus"!==e.type||n)return this.noPosition||!n&&e.path.includes(this.calendar)?void(e.path.includes(this.el)&&n&&t.toggle("hidden")):(t.toggle("hidden"),t.contains("hidden")?null:u(this))}var v={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},w={1:"Sun",2:"Mon",3:"Tue",4:"Wed",5:"Thu",6:"Fri",0:"Sat"},D={t:"top",r:"right",b:"bottom",l:"left"},g=[];return e});